document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("courses-container"),d=document.getElementById("add-course"),B=document.getElementById("calculate"),s=document.getElementById("clear-all"),u=document.getElementById("save-data"),E=document.getElementById("results"),b=document.getElementById("cgpa-result");let w=1;const L=50,v=()=>{const e=a?.querySelectorAll(".course-row"),t=a?.querySelectorAll(".remove-btn");if(e&&t){const n=e.length<=1;if(t.forEach(o=>{o.disabled=n}),d){const o=e.length>=L;d.disabled=o,d.title=o?"Maximum courses reached":""}}},h=localStorage.getItem("iium-gpa-data");if(h)try{const e=JSON.parse(h);e.prevCgpa&&(document.getElementById("prev-cgpa").value=e.prevCgpa),e.prevCredits&&(document.getElementById("prev-credits").value=e.prevCredits)}catch{}v(),a?.addEventListener("keydown",e=>{if(e.key==="Enter"){const t=e.target,n=t.closest(".course-row");n&&(t.tagName==="INPUT"||t.tagName==="SELECT")&&(e.preventDefault(),n.nextElementSibling?n.nextElementSibling.querySelector(".course-name")?.focus():d.disabled||d?.click())}}),d?.addEventListener("click",()=>{if((a?.querySelectorAll(".course-row").length||0)>=L)return;const t=document.createElement("div");t.className="course-row slide-in",t.dataset.index=w++,t.innerHTML=`
        <input type="text" class="course-name" placeholder="Course name" aria-label="Course name" maxlength="60" />
        <select class="grade" aria-label="Grade">
          <option value="">Grade</option>
          <option value="4.00">A (4.00)</option>
          <option value="3.67">A- (3.67)</option>
          <option value="3.33">B+ (3.33)</option>
          <option value="3.00">B (3.00)</option>
          <option value="2.67">B- (2.67)</option>
          <option value="2.33">C+ (2.33)</option>
          <option value="2.00">C (2.00)</option>
          <option value="1.67">C- (1.67)</option>
          <option value="1.33">D+ (1.33)</option>
          <option value="1.00">D (1.00)</option>
          <option value="0.00">F (0.00)</option>
        </select>
        <select class="credits" aria-label="Credits">
          <option value="">Credits</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
        </select>
        <button type="button" class="remove-btn" title="Remove course" aria-label="Remove course">×</button>
      `,a?.appendChild(t),v(),t.querySelector(".course-name")?.focus()}),a?.addEventListener("click",e=>{const t=e.target.closest(".remove-btn");if(t&&Array.from(a.querySelectorAll(".course-row")).length>1){const o=t.closest(".course-row");if(!o)return;const r=()=>{let i=o.nextElementSibling?.querySelector(".remove-btn");i||(i=o.previousElementSibling?.querySelector(".remove-btn")),o.remove(),i&&i.focus(),v()};window.matchMedia("(prefers-reduced-motion: reduce)").matches?r():(o.classList.add("removing"),setTimeout(r,200))}}),a?.addEventListener("input",e=>{const t=e.target;t.classList.contains("input-error")&&(t.classList.remove("input-error"),t.removeAttribute("aria-invalid")),document.getElementById("validation-error")?.classList.remove("visible")}),B?.addEventListener("click",()=>{const e=a?.querySelectorAll(".course-row"),t=document.getElementById("validation-error");t&&(t.textContent="",t.classList.remove("visible"));let n=!1,o=0,r=0;if(e?.forEach(g=>{const f=g.querySelector(".course-name"),l=g.querySelector(".grade"),c=g.querySelector(".credits");[f,l,c].forEach(m=>{m?.classList.remove("input-error"),m?.removeAttribute("aria-invalid")});const A=f.value.trim()!=="",y=l.value!=="",C=c.value!=="";if((A||y||C)&&(!y||!C))n=!0,y||(l.classList.add("input-error"),l.setAttribute("aria-invalid","true")),C||(c.classList.add("input-error"),c.setAttribute("aria-invalid","true"));else if(y&&C){const m=parseFloat(l.value),x=parseInt(c.value);!isNaN(m)&&!isNaN(x)&&(o+=m*x,r+=x)}}),n){t&&(t.textContent="⚠️ Please fill in Grade and Credits for all started courses.",t.classList.add("visible")),E?.classList.add("hidden"),b?.classList.add("hidden");return}const I=r>0?(o/r).toFixed(2):"0.00";document.getElementById("semester-gpa").textContent=I,document.getElementById("total-credits").textContent=r,E?.classList.remove("hidden");const i=parseFloat(document.getElementById("prev-cgpa").value),p=parseInt(document.getElementById("prev-credits").value);if(!isNaN(i)&&!isNaN(p)&&p>0){const f=i*p+o,l=p+r,c=(f/l).toFixed(2);document.getElementById("new-cgpa").textContent=c,b?.classList.remove("hidden")}});let S;s?.addEventListener("click",()=>{if(s.getAttribute("data-confirm")==="true")a?.querySelectorAll(".course-row")?.forEach((t,n)=>{n>0?t.remove():(t.querySelector(".course-name").value="",t.querySelector(".grade").value="",t.querySelector(".credits").value="",t.querySelector(".course-name").focus())}),document.getElementById("prev-cgpa").value="",document.getElementById("prev-credits").value="",E?.classList.add("hidden"),b?.classList.add("hidden"),v(),s.textContent="Clear All",s.classList.remove("btn-danger-text"),s.removeAttribute("data-confirm"),clearTimeout(S);else{const e=s.textContent;s.textContent="Confirm Clear?",s.classList.add("btn-danger-text"),s.setAttribute("data-confirm","true"),S=setTimeout(()=>{s.textContent=e,s.classList.remove("btn-danger-text"),s.removeAttribute("data-confirm")},3e3)}}),u?.addEventListener("click",()=>{const e=document.getElementById("prev-cgpa"),t=document.getElementById("prev-credits"),n=document.getElementById("save-status"),o={prevCgpa:e?.value||"",prevCredits:t?.value||""};localStorage.setItem("iium-gpa-data",JSON.stringify(o));const r=u.textContent;u.textContent="✅ Saved!",u.disabled=!0,n&&(n.textContent="Changes saved successfully",n.classList.add("visible")),setTimeout(()=>{u.textContent=r,u.disabled=!1,n&&(n.classList.remove("visible"),setTimeout(()=>{n.textContent=""},300))},2e3)}),document.querySelectorAll(".copy-btn").forEach(e=>{e.addEventListener("click",async()=>{const n=e.previousElementSibling?.textContent||"";try{await navigator.clipboard.writeText(n);const o=e.innerHTML;e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',e.classList.add("copied"),e.setAttribute("aria-label","Copied!"),setTimeout(()=>{e.innerHTML=o,e.classList.remove("copied"),e.setAttribute("aria-label","Copy to clipboard")},2e3)}catch(o){console.error("Failed to copy:",o)}})})});
//# sourceMappingURL=GPACalculator.astro_astro_type_script_index_0_lang.DDyvjdvV.js.map
